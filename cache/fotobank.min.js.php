<?php
if( extension_loaded( "zlib" ) )
{
    ob_start( "ob_gzhandler" );
}
else
{
    ob_start();
}
header( 'Content-Encoding: gzip' );
header( 'Cache-Control: max-age=2678400' );
header( 'Expires: Sun, 04 Nov 2018 14:21:13 GMT' );
header( 'Last-Modified: Thu, 05 Sep 2013 23:49:54 GMT' );
header( 'Content-type: application/javascript; charset: UTF-8' );
?>
/**
 * Table of contents: 
 * visuallightbox.js
 * photo-prev.js
 * vlbdata.js
 * Generated: 2018-10-04 05:21:13
 */


/* Filename: visuallightbox.js */

(function(a){a.fn.visualLightbox=function(ah){var Y=null,z=["select","object","embed"],ab=null,e=[],b=null,aZ=null,av=0,p=50,af,an;if(!document.getElementsByTagName){return}
ah=a.extend({animate:true,autoPlay:false,borderSize:39,containerID:document,enableSlideshow:true,googleAnalytics:false,descSliding:true,imageDataLocation:"south",shadowLocation:"",closeLocation:"",pauseLocation:"",initImage:"",loop:true,overlayDuration:0.2,overlayOpacity:0.7,prefix:"",classNames:"vlightbox",resizeSpeed:7,showGroupName:false,slideTime:4,strings:{closeLink:"",loadingMsg:"загрузка",nextLink:"",prevLink:"",startSlideshow:"",stopSlideshow:"",numDisplayPrefix:"",numDisplaySeparator:"/"},openByHover:false,enableRightClick:false,featBrowser:true,breathingSize:10,startZoom:false,floating:true},ah);if(ah.animate){var aW=Math.max(ah.overlayDuration,0);ah.resizeSpeed=Math.max(Math.min(ah.resizeSpeed,10),1);var aQ=(11-ah.resizeSpeed)*0.15}else{var aW=0;var aQ=0}
var aY=ah.enableSlideshow;ah.overlayOpacity=Math.max(Math.min(ah.overlayOpacity,1),0);var az=ah.autoPlay;var au=a(ah.containerID);var m=ah.classNames;aO();var aK=au.length&&au.get(0)!=document?au.get(0):document.getElementsByTagName("body").item(0);if(aK.childNodes.length){a(aK.childNodes[0]).before(a("<div></div>"));aK=aK.childNodes[0]}
function y(t,c,d){(a("#"+t).unbind())[c](d)}
if(!document.getElementById(J("overlay"))){var ak=document.createElement("div");ak.setAttribute("id",J("overlay"));ak.style.display="none";aK.appendChild(ak);var aI=document.createElement("div");aI.setAttribute("id",J("lightbox"));aI.style.display="none";aK.appendChild(aI);var aG=document.createElement("div");aG.setAttribute("id",J("imageDataContainer"));aG.className=J("clearfix");var w=document.createElement("table");w.setAttribute("id",J("outerImageContainer"));w.setAttribute("style","margin-top: -20px;");w.cellSpacing=0;aI.appendChild(w);var aM=w.insertRow(-1);var aq=aM.insertCell(-1);aq.className="tl";var aw=aM.insertCell(-1);aw.className="tc";var ap=aM.insertCell(-1);ap.className="tr";var k=w.insertRow(-1);var aF=k.insertCell(-1);aF.className="ml";var N=k.insertCell(-1);N.setAttribute("id",J("lightboxFrameBody"));var aB=k.insertCell(-1);aB.className="mr";var am=w.insertRow(-1);var al=am.insertCell(-1);al.className="bl";var ao=am.insertCell(-1);ao.className="bc";var ae=am.insertCell(-1);ae.className="br";if(ah.imageDataLocation=="north"){N.appendChild(aG)}
var reiting=document.createElement("div");reiting.setAttribute("id",J("Reiting"));reiting.setAttribute("class","div_reiting");aw.appendChild(reiting);var B=document.createElement("div");B.setAttribute("id",J("caption"));B.setAttribute("class","ph_modern_nm");aG.appendChild(B);B.style.display="none";var W=document.createElement("div");W.setAttribute("id",J("imageData"));W.setAttribute("style","height: 40px;");aG.appendChild(W);var tT=document.createElement("table");tT.setAttribute("id",J("tableData"));tT.setAttribute("border","0");tT.setAttribute("cellspacing","10px");tT.setAttribute("width","100%");W.appendChild(tT);var tB=document.createElement("tbody");tT.appendChild(tB);var tR=document.createElement("tr");tB.appendChild(tR);var tDa=document.createElement("td");tDa.setAttribute("width","24%");tDa.setAttribute("valign","top");tR.appendChild(tDa);var tDb=document.createElement("td");tDb.setAttribute("width","33%");tDb.setAttribute("valign","top");tDb.setAttribute("align","left");tR.appendChild(tDb);var tDc=document.createElement("td");tDc.setAttribute("width","33%");tDc.setAttribute("valign","top");tDc.setAttribute("align","right");tR.appendChild(tDc);var tDd=document.createElement("td");tDd.setAttribute("width","10%");tDd.setAttribute("valign","top");tR.appendChild(tDd);var u=document.createElement("div");u.setAttribute("id",J("imageDetails"));u.setAttribute("style","width: 90px; padding-top: 0;");tDa.appendChild(u);var iBasket=document.createElement("input");iBasket.setAttribute("id",J("iBasket"));iBasket.setAttribute("type","button");iBasket.setAttribute("value","в корзину");iBasket.setAttribute("style","cursor: pointer;");tDb.appendChild(iBasket);var iBasketP=document.createElement("p");iBasketP.setAttribute("id",J("iBasketP"));tDb.appendChild(iBasketP);var igoVote=document.createElement("input");igoVote.setAttribute("id",J("igoVote"));igoVote.setAttribute("type","button");igoVote.setAttribute("value","голосовать");igoVote.setAttribute("style","cursor: pointer;");tDc.appendChild(igoVote);var igoVoteP=document.createElement("p");igoVoteP.setAttribute("id",J("igoVoteP"));tDc.appendChild(igoVoteP);var aa=document.createElement("span");aa.setAttribute("id",J("detailsNav"));u.appendChild(aa);var s=document.createElement("p");s.setAttribute("id",J("numberDisplay"));s.setAttribute("style","margin-left: 20px; margin-top: -6px;");u.appendChild(s);var r=document.createElement("div");r.setAttribute("id",J("imageContainerMain"));N.appendChild(r);var ad=document.createElement("div");ad.setAttribute("id",J("imageContainer"));r.appendChild(ad);var aC=document.createElement("img");aC.setAttribute("id",J("lightboxImage"));ad.appendChild(aC);if(!ah.enableRightClick){var at=document.createElement("div");at.setAttribute("id",J("hoverNav"));at.style.background="white";at.style.opacity=0;at.style.filter="alpha(opacity=0)";ad.appendChild(at)}
var aH=document.createElement("a");aH.setAttribute("id",J("prevLinkImg"));aH.setAttribute("href","javascript:void(0);");r.appendChild(aH);var o=document.createElement("a");o.setAttribute("id",J("nextLinkImg"));o.setAttribute("href","javascript:void(0);");r.appendChild(o);var S=document.createElement("div");S.setAttribute("id",J("loading"));ad.appendChild(S);var I=document.createElement("a");I.setAttribute("id",J("loadingLink"));I.setAttribute("href","javascript:void(0);");I.innerHTML=ah.strings.loadingMsg;S.appendChild(I);if(ah.imageDataLocation!="north"){N.appendChild(aG)}
var aS=document.createElement("div");aS.setAttribute("id",J("shadow"));(ah.shadowLocation?document.getElementById(J(ah.shadowLocation)):ao).appendChild(aS);var l=document.createElement("a");l.setAttribute("id",J("prevLinkDetails"));l.setAttribute("href","javascript:void(0);");l.innerHTML=ah.strings.prevLink;aa.appendChild(l);var aP=document.createElement("a");aP.setAttribute("id",J("slideShowControl"));aP.setAttribute("href","javascript:void(0);");document.getElementById(J(ah.pauseLocation||"detailsNav")).appendChild(aP);var V=document.createElement("a");V.setAttribute("id",J("closeLink"));V.setAttribute("href","javascript:void(0);");V.innerHTML=ah.strings.closeLink;if(ah.closeLocation=="nav"){aa.appendChild(V)}else{var D=document.createElement("div");D.setAttribute("id",J("close"));D.setAttribute("style","padding-top: 0px; float: right;");if(ah.closeLocation=="top"){ap.appendChild(D)}else{tDd.appendChild(D)}
D.appendChild(V)}
var aL=document.createElement("a");aL.setAttribute("id",J("nextLinkDetails"));aL.setAttribute("href","javascript:void(0);");aL.innerHTML=ah.strings.nextLink;aa.appendChild(aL)}
var F=new ag(function(c){q(c)},400,function(){P()},300);function ay(){y(J("overlay"),"click",P);if(ah.openByHover){aX("lightbox").unbind().hover(function(){F.start()},function(){F.stop()})}else{y(J("lightbox"),"click",P)}
y(J("prevLinkDetails"),"click",Z);y(J("slideShowControl"),"click",v);y(J("closeLink"),"click",P);y(J("nextLinkDetails"),"click",aE);if(!ah.enableRightClick){y(J("hoverNav"),"mousemove",A);y(J("hoverNav"),"mouseout",T)}
y(J("prevLinkImg"),"click",Z);y(J("nextLinkImg"),"click",aE);y(J("loadingLink"),"click",P)}
if(ah.initImage!=""){q("#"+ah.initImage)}
function aT(c){if(c.tagName.toLowerCase()!="a"){c=a("A:first",c)}
return a(c).attr("href")}
function M(c){if(/^a$/i.test(c.tagName)){return a(c).attr("title")||c.title}
return a(">div:first",c).html()}
function aO(){a("."+m.replace(/\,/g,",."),au).each(function(){if(aT(this)){if(ah.openByHover){a(this).hover(function(){F.start(this)},function(){F.stop(this)})}else{a(this).click(function(c){c.preventDefault();q(this);return false})}}})}
var q=this.start=function(c){n();c=a(c);av=c.get(0);aX("overlay").css({height:O()[1]+"px",top:0,left:i().x+"px"});if(ah.descSliding){aX("imageDataContainer").hide()}
aX("lightboxImage").hide().attr({src:""});if(ah.startZoom){aX("imageContainer").css({width:c.width()+"px",height:c.height()+"px"});if(!document.all){aX("outerImageContainer").css({opacity:0.1})}
aX("lightbox").css({left:c.offset().left-ah.borderSize+"px",top:c.offset().top-ah.borderSize+"px",width:c.width()+ah.borderSize*2+"px",height:"auto"})}else{aX("overlay").css({opacity:0}).show().fadeTo(aW*1000,ah.overlayOpacity);aX("lightbox").css({left:0,width:"100%"})}
ay();aX("lightbox").show();e=[];ab=null;aZ=0;a("."+(c.attr("className")||c.get(0).className),au).each(function(){if(aT(this)){e.push({link:aT(this),title:M(this)});if(this==c.get(0)){aZ=e.length-1}}});if(e.length>1){ab=c.attr("className")}
if(ah.featBrowser){a(window).resize(ai)}
if(ah.floating){a(window).scroll(ai)}
a(window).resize(G);a(window).scroll(G);g(aZ)};function g(c){Y=c;aR();U();H();if(!ah.startZoom){aX("lightboxImage").hide()}
aX("prevLinkImg").hide();aX("nextLinkImg").hide();if(ah.descSliding){aX("imageDataContainer").hide()}
af=new Image();af.onload=function(){e[Y].link=af.src;e[Y].width=af.width;e[Y].height=af.height;function goParam(fotoId){var goBacketP=$(' #vlb1iBasketP ');var goVoteP=$(' #vlb1igoVoteP ');$.ajax({type:"POST",header:('Content-Type: application/json; charset=windows-1251;'),url:'/inc/ajaxModern.php',data:{fotoId:fotoId},error:function(XHR){$(this).outDebug(" Ошибка: "+XHR.status+"  "+XHR.statusText,"/js/visLightBox/js/visuallightbox.js","goParam");},statusCode:{404:function(){$(this).outDebug("Страница не найдена","/js/visLightBox/js/visuallightbox.js","goParam");}},success:function(html){$(this).outDebug(html,"/js/visLightBox/js/visuallightbox.js","goParam");var ans=$.parseJSON(html);var reiting=str_repeat("<img src='/img/reyt.png' style='margin-top: -10px;'/>",Math.round(ans.votes/5).toFixed(0));var retingTxt=((Math.round(ans.votes/5).toFixed(0))==0)?'':'Рейтинг:';if(ans.votes>4){$(' #vlb1Reiting ').empty().append("Голосов: "+ans.votes+"&nbsp;&nbsp;&nbsp;"+retingTxt+"&nbsp;"+reiting);}else{$(' #vlb1Reiting ').empty().append("Голосов: "+ans.votes)}
goBacketP.empty().append((ans.price!=0)?"цена фото: "+ans.price+" гр.":"цена фото: бесплатно");goVoteP.empty().append((ans.votpr!=0)?"цена голоса: "+ans.votpr+" гр.":"цена голоса: бесплатно");}});}
function str_repeat(str,times){return new Array(++times).join(str);}
function voteAdd(idPhoto){var goVoteP=$(' #vlb1igoVoteP ');$.ajax({type:"POST",header:('Content-Type: application/json; charset=utf-8;'),url:'/go_vote.php',data:{'id':idPhoto},error:function(XHR){$(this).outDebug(" Ошибка: "+XHR.status+"&nbsp;&nbsp;"+XHR.statusText,"/js/visLightBox/js/visuallightbox.js","voteAdd");},statusCode:{404:function(){$(this).outDebug("Страница не найдена","/js/visLightBox/js/visuallightbox.js","voteAdd");}},success:function(data){$(this).outDebug(data,"/js/visLightBox/js/visuallightbox.js","voteAdd");var ans=JSON.parse(data);if(ans.status=='ERR'){humane.timeout=(8000);humane.error(ans.msg);}
else{dhtmlx.message({text:ans.msg,expire:10000,type:"addgolos"});var newBalans=ans.balans.toFixed(2);$('#balans').empty().append(newBalans);$('span#s'+ans.idPhoto).empty().append(ans.votes);var reiting=str_repeat("<img src='/img/reyt.png' style='margin-top: -10px;' />",Math.round(ans.votes/5).toFixed(0));var retingTxt=((Math.round(ans.votes/5).toFixed(0))==0)?'':'Рейтинг:';$('div#d'+ans.idPhoto).empty().append(retingTxt+" "+reiting);$(' #vlb1Reiting ').empty().append("Голосов: "+ans.votes+"&nbsp;&nbsp;&nbsp;"+retingTxt+"&nbsp;"+reiting);goVoteP.empty().append((ans.votpr!=0)?"цена голоса: "+ans.votpr+" гр.":"цена голоса: бесплатно");}}});}
var clBacket=$(" #vlb1iBasket ");clBacket.unbind('click');clBacket.bind('click',function(){basketAdd(fotoId['1']);});var clGoVoite=$(" #vlb1igoVote ");clGoVoite.unbind('click');clGoVoite.bind('click',function(){voteAdd(fotoId['1']);});var arr=e[Y].link;var fotoId=arr.split(/[\?]/);goParam(fotoId['1']);aD(false)};if(ah.startZoom&&!aX("lightboxImage").attr("src")){e[Y].width=320;e[Y].height=240;aD(false,true)}
af.src=e[Y].link;if(ah.googleAnalytics){urchinTracker(e[Y].link)}}
function aD(t,be){var a3=e[Y].width;var bc=e[Y].height;var bf=f();var a7=a3/bc;if(ah.featBrowser){var a0=bf.winWidth/bf.winHeight;var a5=(a3+ah.borderSize*2+ah.breathingSize*2)/(bc+ah.borderSize*2+ah.breathingSize*2+p);if(a5>a0){var bb=bf.winWidth-ah.borderSize*2-ah.breathingSize*2;var a6=Math.round(bb/a7)}else{var a6=bf.winHeight-ah.borderSize*2-ah.breathingSize*2-p;var bb=Math.round(a6*a7)}
if(a3>bb||bc>a6){a3=bb;bc=a6}}
var a1,c,a4,a2;a4=(a3+ah.borderSize*2);a2=(bc+p+ah.borderSize*2);var a9=i();if(ah.openByHover){c=Math.min(Math.max(a(av).offset().left+a(av).width()/2-a4/2,a9.x),a9.x+bf.winWidth-a4);a1=Math.min(Math.max(a(av).offset().top+a(av).height()/2-a2/2,a9.y),a9.y+bf.winHeight-a2)}else{a1=a9.y+(bf.winHeight-a2)/2;c=a9.x}
a2=Math.max(a2,parseInt(aX("lightbox").height()));if(a2>bf.winHeight){a1=Math.max(Math.min(aX("lightbox").offset().top,a9.y),a9.y+bf.winHeight-a2)}
var bd=ah.openByHover?a4+"px":(/mobile.+safari/i.test(navigator.userAgent)?bf.winWidth+"px":"100%");var bh=aX("imageContainer");if(t==true){bh.css({height:bc+"px",width:a3+"px"});if(ah.floating){h(aX("lightbox"),c,a1,bd)}else{aX("lightbox").css({top:a1+"px",left:c+"px"})}}else{var a8=aX("lightboxImage");bh.stop(true,false);a8.stop(true,false);var d;if(ah.startZoom&&a8.attr("src")){d=a8;d.attr({id:J("lightboxImage2")})}else{a8.remove()}
if(!be){a8=a(af);a8.hide();a8.attr({id:J("lightboxImage")});bh.append(a8)}
var bg=a7/(bh.width()/bh.height());if(!be){if(ah.startZoom){if(d){aX("lightboxImage2").stop(true,true)}
var ba=d?120:100;if(d){d.css({width:(1>bg?"auto":(d.width()/d.parent().width())*100+"%"),height:(1>bg?(d.height()/d.parent().height())*100+"%":"auto"),left:0,top:0})}
a8.css({opacity:0,display:"block",position:"absolute",width:(1>bg)?ba+"%":"auto",height:(1>bg)?"auto":ba+"%",left:(100-ba*(1>bg?1:bg))/2+"%",top:(100-ba*(1>bg?1/(bg):1))/2+"%"})}
if(ah.startZoom){aV()}}
L(c,a1,a3,bc,bd,bg,be)}
if(aX("imageDataContainer").css("position")!="absolute"){aX("imageDataContainer").css({width:a3+"px"})}
if(ah.enableRightClick){aX("lightboxImage").mousemove(A);aX("lightboxImage").mouseout(T)}}
function L(a6,a1,a4,a5,a0,a7,a2){var a3=aX("imageContainer");var d=aX("lightboxImage");var t=aX("lightbox");if(!a2){var c=aX("lightboxImage2")}
if(ah.startZoom){d.fadeTo(aQ*1000,1);if(!document.all){aX("outerImageContainer").fadeTo(aQ*1000,1)}}
h(t,a6,a1,a0);if(ah.startZoom&&!a2){c.animate(a.extend({opacity:0},a7<1?{height:"120%",top:"-10%",left:(100-120/a7)/2+"%"}:{width:"120%",left:"-10%",top:(100-a7*120)/2+"%"}),{queue:false,duration:aQ*1000,complete:function(){a(this).remove()}});d.animate(a.extend({left:0,top:0},a7<1?{width:"100%"}:{height:"100%"}),{queue:false,duration:aQ*1000})}
a3.animate({width:a4+"px",height:a5+"px"},{queue:false,duration:aQ*1000,complete:!a2?function(){aU()}:null})}
function h(a0,a1,d,c){a0.stop(true,false);var t={top:d,left:a1};if(c!=a0.get(0).style.width){t.width=c}
a0.animate(t,{queue:false,duration:aQ*1000})}
function H(){clearTimeout(an);var c=aX("loading");c.show();c.css({visibility:"hidden"});an=setTimeout(function(){aX("loading").css({visibility:"visible"})},300)}
function aV(){clearTimeout(an);aX("loading").hide()}
function aU(){aV();if(ah.startZoom){aX("overlay:hidden").css({opacity:0}).show().fadeTo(aW*1000,ah.overlayOpacity);aN()}else{aX("lightboxImage").css({opacity:0}).show().fadeTo(500,1,function(){aN()})}
E()}
function x(){aX("caption").html((e[Y].title||"").replace(/\n/g,"<br>"));if(e[Y].title){aX("caption").show()}else{aX("caption").hide()}
if(e.length>1){var c=ah.strings.numDisplayPrefix+" "+parseInt(Y+1)+" "+ah.strings.numDisplaySeparator+" "+e.length;if(ah.showGroupName&&ab){c+=" "+ah.strings.numDisplaySeparator+" "+ab}
aX("numberDisplay").text(c);aX("slideShowControl").css({display:aY?"":"none"})}}
function aN(){x();if(ah.descSliding){aX("imageDataContainer").animate({height:"show",opacity:"show"},650,null,function(){C()})}else{C()}}
function C(){var c=1/e.length;p=p*(1-c)+aX("imageDataContainer").height()*c;if(e.length>1){aX("prevLinkImg").show();aX("nextLinkImg").show();if(aY){if(az){ac()}else{aA()}}}else{aX("prevLinkImg").hide();aX("nextLinkImg").hide()}
j()}
function ac(){if(aX("lightbox:hidden").length){return}
U();az=true;b=setTimeout(function(){aE()},ah.slideTime*1000);aX("slideShowControl").text(ah.strings.stopSlideshow);aX("slideShowControl").addClass("started")}
function aA(){az=false;U();aX("slideShowControl").text(ah.strings.startSlideshow);aX("slideShowControl").removeClass("started")}
function v(){if(az){aA()}else{ac()}}
function U(){if(b){b=clearTimeout(b)}}
function aE(){if(e.length>1){U();if(!ah.loop&&((Y==e.length-1&&aZ==0)||(Y+1==aZ))){P();return}
if(Y==e.length-1){ax(0)}else{ax(Y+1)}}}
function ax(c){if(ah.descSliding){aX("imageDataContainer").animate({height:"hide",opacity:"hide"},650,null,function(){g(c)})}else{g(c)}}
function Z(){if(e.length>1){if(Y==0){ax(e.length-1)}else{ax(Y-1)}}}
function aJ(){if(e.length>1){ax(0)}}
function ar(){if(e.length>1){ax(e.length-1)}}
function j(){document.onkeydown=aj}
function aR(){document.onkeydown=""}
function aj(c){if(c==null){keycode=event.keyCode}else{keycode=c.which}
key=String.fromCharCode(keycode).toLowerCase();if(key=="x"||key=="o"||key=="c"||keycode==27){P()}else{if(key=="p"||key=="%"){Z()}else{if(key=="n"||key=="'"){aE()}else{if(key=="f"){aJ()}else{if(key=="l"){ar()}else{if(key=="s"){if(e.length>0&&ah.enableSlideshow){v()}}}}}}}}
function E(){var d=e.length-1==Y?0:Y+1;(new Image()).src=e[d].link;var c=Y==0?e.length-1:Y-1;(new Image()).src=e[c].link}
function P(c){if(c){var d=a(c.target).attr("id");if(J("closeLink")!=d&&J("lightbox")!=d&&J("overlay")!=d){return}}
aX("imageContainer").stop(true,false);aX("lightboxImage").stop(true,false);if(af){af.onload=null}
aR();U();aX("lightbox").hide();X();if(ah.overlayOpacity){aX("overlay").fadeOut(aW*1000)}else{aX("overlay").hide()}
a(window).unbind("resize",ai);a(window).unbind("scroll",ai);a(window).unbind("resize",G);a(window).unbind("scroll",G)}
function A(c){if(c.pageX-aX("imageContainer").offset().left<aX("imageContainer").width()/2){aX("prevLinkImg").addClass("hover");aX("nextLinkImg").removeClass("hover")}else{aX("prevLinkImg").removeClass("hover");aX("nextLinkImg").addClass("hover")}}
function T(){aX("prevLinkImg").removeClass("hover");aX("nextLinkImg").removeClass("hover")}
function ai(){aD(true)}
function G(){aX("overlay").css({left:i().x+"px",top:0,width:"100%",height:O()[1]+"px"})}
function X(){var a0;var d=z;for(var t=0;t<d.length;t++){a0=document.getElementsByTagName(d[t]);for(var c=0;c<a0.length;c++){a(a0[c]).css({visibility:"visible"})}}}
function n(){var c=z;for(var d=0;d<c.length;d++){a(c[d]).css({visibility:"hidden"})}}
function i(){var c,d;if(self.pageYOffset||self.pageXOffset){c=self.pageXOffset;d=self.pageYOffset}else{if(document.documentElement&&(document.documentElement.scrollTop||document.documentElement.scrollLeft)){c=document.documentElement.scrollLeft;d=document.documentElement.scrollTop}else{if(document.body){c=document.body.scrollLeft;d=document.body.scrollTop}}}
return{x:c,y:d}}
function f(){var d,c;if(self.innerHeight){d=self.innerWidth;c=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){d=document.documentElement.clientWidth;c=document.documentElement.clientHeight}else{if(document.body){d=document.body.clientWidth;c=document.body.clientHeight}}}
return{winWidth:d,winHeight:c}}
function O(){var c=document.body,a0=document.documentElement,d=0,t=0;if(a0){d=Math.max(d,a0.scrollWidth,a0.offsetWidth);t=Math.max(t,a0.scrollHeight,a0.offsetHeight)}
if(c){d=Math.max(d,c.scrollWidth,c.offsetWidth);t=Math.max(t,c.scrollHeight,c.offsetHeight);if(window.innerWidth){d=Math.max(d,window.innerWidth);t=Math.max(t,window.innerHeight)}}
return[d,t]}
function J(c){return ah.prefix+c}
function aX(c){return a("#"+J(c))}
function ag(a3,c,a1,t){var a2,d,a0;this.start=function(a4){if(a0){clearTimeout(a0)}
a0=0;if(!a4||(a4==a2)){return}
if(a2){if(d){clearTimeout(d)}else{a1(a2)}
d=0}
a2=a4;d=setTimeout(function(){d=0;a3(a4)},c)};this.stop=function(a4){if(!a2||a4&&(a2!=a4)){return}
if(d){clearTimeout(d)}
d=0;if(!a0){a0=setTimeout(function(){a0=0;a1(a4||a2);a2=0},t)}}}
return this}})(jQuery);

/* Filename: photo-prev.js */

$(document).ready(function(){$(function(){$('.top_pos').each(function(i){$(this).delay((i)*500).fadeTo(300,1);});});});function preview(idPhoto){$('#photo_preview').fadeTo('fast',0.01,function(){$('<img src="/photo_preview.php?id=" + idPhoto/>');$('#photo_preview').load('/photo_preview.php?id='+idPhoto,function(){$('#photo_preview_bg').height($(document).height()).toggleClass('hidden').fadeTo('fast',0.7,function(){$('#photo_preview').alignCenter().toggleClass('hidden').fadeTo('fast',1).click(function(){$('#photo_preview').css('box-shadow','');});});});});return false;}
function previewTop(idPhoto){$('#photo_preview').fadeTo('fast',0.01,function(){$('<img src="/photo_preview.php?id=" + idPhoto/>');$('#photo_preview').load('photo_top_preview.php?id='+idPhoto,function(){$('#photo_preview_bg').height($(document).height()).toggleClass('hidden').fadeTo('fast',0.7,function(){$("#photo_preview").css('box-shadow','0 0 0 2px #000,0 0 2px 6px #fa0, 0 0 0 11px #fd0, 0 0 0 13px #000');$('#photo_preview').alignCenter().toggleClass('hidden').fadeTo('fast',1).click(function(){$('#photo_preview').css('box-shadow','');});});});});return false;}
$(document).ready(function(){$.fn.alignCenter=function(imgWidth,imgHeight){$(this).removeAttr("width").removeAttr("height").css({width:"",height:""});var fotoW=$(this).width();var fotoH=($(this).height()>150)?$(this).height():(($(this).width()>500)?$(this).width()*0.82:$(this).width()/0.6);var marginLeft=-fotoW/2+'px';var marginTop=-fotoH/2+'px';$(this).each(function(){var src=$(this).attr('src');$(this).attr('src','');$(this).attr('src',src);});return $(this).css({'margin-left':marginLeft,'margin-top':marginTop});};});function hidePreview(){$('#photo_preview').toggleClass('hidden').fadeOut('normal',function(){$('#photo_preview_bg').toggleClass('hidden').removeAttr('style').hide().click(function(){$('#photo_preview').css('box-shadow','');});});return false;}
humane.forceNew=(true);humane.clickToClose=(true);humane.timeout=(2500);function basketAdd(idPhoto){$.post('add_basket.php',{'id':idPhoto},function(data){$(this).outDebug(data,"add_basket.php","basketAdd");var ans=JSON.parse(data);if(ans.status=='ERR'){humane.error(ans.msg);}
else{dhtmlx.message({text:ans.msg,expire:15000,type:"addfoto"});}});}
function goVote(balans,voteprice,idPhoto){if(voteprice!=0)
{dhtmlx.confirm({type:"confirm",text:"Цена одного голоса "+voteprice+" гр.<br> Проголосовать?",callback:function(index){if(index==true){$.ajax({type:"POST",header:('Content-Type: application/json; charset=utf-8;'),url:'/go_vote.php',data:{'id':idPhoto},error:function(XHR){$(this).outDebug(" Ошибка: "+XHR.status+"  "+XHR.statusText,"/go_vote.php","goVote");},statusCode:{404:function(){$(this).outDebug("Страница не найдена","/go_vote.php","goVote");}},success:function(data){$(this).outDebug(data,"/go_vote.php","goVote");var ans=JSON.parse(data);if(ans.status=='ERR'){humane.timeout=(8000);humane.error(ans.msg);}
else{$(this).outDebug(data,"/go_vote.php","goVote");dhtmlx.message({text:"Ваш голос добавлен",expire:10000,type:"addgolos"});var newBalans=(balans-voteprice).toFixed(2);$('#balans').empty().append(newBalans);preview(idPhoto);}}});}}});}
else
{$.post('/go_vote.php',{'id':idPhoto},function(data){$(this).outDebug(data,"/go_vote.php","goVote");var ans=JSON.parse(data);if(ans.status=='ERR'){humane.timeout=(8000);humane.error(ans.msg);}
else{humane.success("Ваш голос успешно добавлен!");preview(idPhoto);}})}}
function getScreenHeight(){var myHeight=0;if(typeof(window.innerHeight)=="number"){myHeight=window.innerHeight;}else if(document.documentElement&&(document.documentElement.clientHeight||document.documentElement.clientHeight)){myHeight=document.documentElement.clientHeight;}else if(document.body&&(document.body.clientHeight||document.body.clientHeight)){myHeight=document.body.clientHeight;}
return myHeight;}
function imagesPreloader(){jQuery(preloadObjects).each(function(){var item=this;if(item.nodeName.toLowerCase()=="img"&&(typeof excludeImages=="undefined"||excludeImages==false||(item.className.indexOf(excludeImages)==-1))){item.longDesc=item.src;item.src="#";item.alt="";var preloaderElt=jQuery("<figure ></figure >");jQuery(preloaderElt).css({"display":"block"});preloaderElt.className="preloader "+item.className;jQuery(item).before(preloaderElt);loadImage(item);}});}
function loadImage(item){var pos=jQuery(item).position();var ItemOffsetTop=typeof pos=="object"&&typeof pos.top!="undefined"?pos.top:0;var documentScrollTop=jQuery(window).scrollTop();var scrHeight=getScreenHeight();if(ItemOffsetTop<=(documentScrollTop+scrHeight)&&typeof item.storePeriod=="undefined"){item.src=item.longDesc;item.onerror=function(){this.width=0;this.height=0;};item.onabort=function(){this.width=0;this.height=0;};item.wait=0;item.storePeriod=setInterval(function(){item.wait+=loadCheck;if(item.width&&item.height&&item.complete){clearInterval(item.storePeriod);item.storePeriod=false;jQuery(item.previousSibling).remove();jQuery(item).css("visibility","visible");if(typeof item.loadedCount!="undefined"&&notImagesLoaded[item.loadedCount]){notImagesLoaded[item.loadedCount]=false;}}else if(item.wait>loadWait){clearInterval(item.storePeriod);item.storePeriod=false;if(typeof item.loadedCount!="undefined"&&notImagesLoaded[item.loadedCount]){notImagesLoaded[item.loadedCount]=false;}
jQuery(item).css({"display":"none","visibility":"hidden"});jQuery(item.previousSibling).remove();}},loadCheck);}else{if(typeof item.loadedCount=="undefined"){item.loadedCount=notImagesLoaded.length;notImagesLoaded[item.loadedCount]=item;}}}

/* Filename: vlbdata.js */

jQuery(document).ready(function(){window.Lightbox=new jQuery().visualLightbox({borderSize:10,classNames:'modern',descSliding:false,enableRightClick:false,enableSlideshow:true,prefix:'vlb1',resizeSpeed:8,slideTime:4,startZoom:true})});